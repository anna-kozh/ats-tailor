<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ATS Resume Rewriter</title>
    <style>
      :root {
        --bg: #0e0f12; --card:#15171c; --muted:#9aa3af; --text:#e5e7eb; --accent:#60a5fa;
        --ok:#22c55e; --warn:#f59e0b; --err:#ef4444; --border:#23262d;
      }
      * { box-sizing: border-box }
      body { margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; background:var(--bg); color:var(--text); }
      header { padding:16px 20px; border-bottom:1px solid var(--border); position:sticky; top:0; background:rgba(14,15,18,.9); backdrop-filter: blur(8px); }
      h1 { font-size:18px; margin:0; letter-spacing:.2px }
      .wrap { max-width:1120px; margin:0 auto; padding:20px; }
      .grid { display:grid; gap:16px }
      @media (min-width: 1100px) {
        .grid-2 { grid-template-columns: 1fr 1fr }
        .grid-3 { grid-template-columns: 1fr 1fr 1fr }
      }
      .card { background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px }
      .card h2 { font-size:14px; margin:0 0 8px 0; color:var(--muted); font-weight:600; }
      textarea { width:100%; min-height:220px; background:#0c0d10; color:var(--text); border:1px solid var(--border); border-radius:12px; padding:12px; line-height:1.4; resize: vertical; }
      select, button, .pill { height:40px; border-radius:10px; border:1px solid var(--border); background:#0c0d10; color:var(--text); padding:0 12px; }
      button { background:linear-gradient(180deg,#1e293b,#0b1220); border:1px solid #1f2937; cursor:pointer }
      button[disabled] { opacity:.6; cursor:not-allowed }
      .row { display:flex; gap:10px; align-items:center; flex-wrap:wrap }
      .spacer { flex:1 }
      .pill { display:inline-flex; align-items:center; padding:0 10px; font-size:13px }
      .pill.ok { border-color:#1f3d27; background:#0b1a10; color:var(--ok) }
      .pill.warn { border-color:#3d2f1f; background:#1a140b; color:var(--warn) }
      .status { font-size:13px; color:var(--muted) }
      #v2, #v1Echo, #debug { white-space:pre-wrap }
      .hl-add { font-weight:700 }
      .muted { color:var(--muted) }
      .small { font-size:12px }
      .chips { display:flex; gap:8px; flex-wrap:wrap }
      .chip { background:#101216; border:1px solid var(--border); padding:6px 8px; border-radius:999px; font-size:12px }
      .footer { margin-top:8px; color:var(--muted); font-size:12px }
    </style>
  </head>
  <body>
    <header class="row">
      <h1>ATS Resume Rewriter</h1>
      <div class="spacer"></div>
      <div class="row">
        <span id="scoreV1" class="pill warn">v1: —</span>
        <span id="scoreV2" class="pill ok">v2: —</span>
      </div>
    </header>

    <div class="wrap grid grid-2">
      <section class="card">
        <div class="row" style="margin-bottom:8px">
          <h2>Resume v1</h2>
          <div class="spacer"></div>
          <label class="small muted" for="atsSelect">ATS</label>
          <select id="atsSelect" title="Choose ATS profile">
            <option value="auto">Detect automatically</option>
            <option>Workday</option>
            <option>Greenhouse</option>
            <option>Lever</option>
            <option>iCIMS</option>
            <option>Taleo</option>
            <option>SuccessFactors</option>
            <option>Ashby</option>
            <option>SmartRecruiters</option>
          </select>
          <button id="rewriteBtn">Rewrite</button>
        </div>
        <textarea id="resume" placeholder="Paste your current resume text here…"></textarea>
        <div class="footer">We’ll never send your API key to the browser. Serverless only.</div>
      </section>

      <section class="card">
        <h2>Job Description</h2>
        <textarea id="jd" placeholder="Paste the target job description here…"></textarea>
      </section>

      <section class="card">
        <div class="row" style="margin-bottom:6px">
          <h2>Rewritten Resume v2</h2>
          <div class="spacer"></div>
          <div id="status" class="status">Idle</div>
        </div>
        <div id="v2" class="small"></div>
      </section>

      <section class="card">
        <h2>Resume v1 (echo)</h2>
        <div id="v1Echo" class="small muted"></div>
      </section>

      <section class="card" style="grid-column: 1 / -1">
        <h2>Why this score (debug)</h2>
        <div id="debug" class="small muted"></div>
        <div class="chips" id="missingChips"></div>
      </section>
    </div>

    <script src="/js/main.js" defer></script>
  </body>
</html>